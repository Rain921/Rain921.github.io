'use strict';

var _gulpPlumber = require('gulp-plumber');

var _gulpPlumber2 = _interopRequireDefault(_gulpPlumber);

var _gulpUtil = require('gulp-util');

var _gulpUtil2 = _interopRequireDefault(_gulpUtil);

var _nodeNotifier = require('node-notifier');

var _nodeNotifier2 = _interopRequireDefault(_nodeNotifier);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function errorNotifier() {
	return (0, _gulpPlumber2.default)({ errorHandler: notify });
}

function notify(error) {
	_gulpUtil2.default.log('[' + _gulpUtil2.default.colors.red('ERROR') + ']', error.message);
	_nodeNotifier2.default.notify({ title: 'Error!', message: error.message });
}

function handleError(stream) {
	return stream.on('error', function (error) {
		notify(error);
		this.emit('end');
	});
}

module.exports = errorNotifier;
module.exports.notify = notify;
module.exports.handleError = handleError;